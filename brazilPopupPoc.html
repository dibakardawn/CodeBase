<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script>
$(document).ready(function(){
    $("#btn").bind("click", function() {
		var ddlVal = $("#accountDDL").val();
		//alert(ddlVal);
		if(ddlVal !== "0"){
			var URL = "";
			var w = window.open(URL,"popUpWindow_" + ddlVal,"width=700,height=450");
			var Str = "<p>This id Popup Window " + ddlVal + "</p>";
			$(w.document.body).html(Str);
			setCookie("popUps", ddlVal, 30);
			if (!w.closed) {
				w.focus();
			}
		}
	});
	
	tabCloseDetection();
});

function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = cname + "=" + cvalue + "; " + expires;
}

function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
    }
    return "";
}

function checkCookie() {
    var user = getCookie("username");
    if (user != "") {
        alert("Welcome again " + user);
    } else {
        user = prompt("Please enter your name:", "");
        if (user != "" && user != null) {
            setCookie("username", user, 365);
        }
    }
}

function deleteCookie(cname){
	var cvalue = "";
	var d = new Date();
    d.setTime(d.getTime());
    var expires = "expires="+d.toUTCString();
    document.cookie = cname + "=" + cvalue + "; " + expires;
}

function closePopUp(ddlVal){
	var w = window.open("","popUpWindow_" + ddlVal,"width=700,height=450"); 
	w.close();
}

function tabCloseDetection(){
	window.addEventListener("beforeunload", function (e) {
	  var confirmationMessage = "Tab closing...";
	 
	  (e || window.event).returnValue = confirmationMessage;     //Gecko + IE
	  return confirmationMessage;                                //Webkit, Safari, Chrome etc.
	});
}
</script>
</head>
<body>
<select id="accountDDL" name="accountDDL">
	<option value="0">---Select an Account--</option>
	<option value="1">Account 1</option>
	<option value="2">Account 2</option>
	<option value="3">Account 3</option>
</select>
<button id="btn" name="btn" type="button">Click Me!</button>
</body>
</html>
